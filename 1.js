/*********************!!!!!!!!!!!!!!!!!!技术交流，勿售卖!!!!!!!!!!!!!!!***************************/

/************更多交流，欢迎进群905436479，如果满了请进其他群了解，验证信息填写在什么渠道看到本脚本****************/
/*************************如果无法搜到，就在APP里面进入吧！ ****************************************************/
/***
 牛牛巴士APP：
 https://wwxz.lanzouw.com/b0aug8sjc
 密码：9alc
 ***/

/*********************!!!!!!!!!!!!!!!技术交流，勿售卖!!!!!!!!!!!!!!!***************************/

/******************[回流检测设置]*******************/
//步骤1：填写等待回流的场次和价格
var dateStrs = [" 周"];//预选场次。默认"周"代表所有，如果想选周五、周日，那就填["周五", "周日"]
var moneyStrs = ["¥"];//默认选择价位最低的，如果想等980的回流，那就填["980"]，如果想980和1980那就填  ["980","1980"]，如果所有票档都可以那就填["¥"]
//步骤2：来回检测时间
var listenDelay = 500;//点击场次间隔时间/请求刷新时间，越小越快。[最好默认不改]
var networkDelay = 800;//毫秒。网络延时；如果有票的时候，无法自动选择票档，请加大该值！！！！！！！！！！！

//步骤3：是否需要帮点观影人，如果需要就按要求设置，如果不需要就不理以下设置
//[高级设置]请认真看注释，不要总是没设置好，就先说脚本有问题，自己多看看中文
//前提条件：在地址设置中取消默认观影人------------>如果有默认观影人，进入下单页的时候，系统会帮选默认，然后脚本会误选!
/*********************交技流术，勿售卖本代码***************************/
var clickPerson = true;// 默认true：代表帮点(除非已经预选观影人，否则都是为true，然后填写下方的personNames变量)
/*********************交流技术，勿售卖本代码***************************/
var addBtnOffsetX = 120;//帮点人数按钮的偏移量，也就是选择票档页面的+号偏移量
/*********************交流技术，勿售卖本代码***************************/
var personNames = ["0034", "6372"];//指定观影人,选择观影人身份证末四位
/*********************技术交流，勿售卖本代码***************************/
var clickAddPerson = 200;//点击观影人延迟，越小越快，默认就行
/*********************交流技术，勿售卖本代码***************************/
//步骤4：打开my的场次票档页面
//步骤5：打开autoxjs，执行脚本

/*********************技术交流，勿售卖本代码***************************/
///当你看到这里！说明你很认真看注释了，值得表扬！强烈建议用一个优有量的数据测试一下，看看是否能成功，可以的话，基本就是OK的了！

var window = floaty.window(<frame><button id="action" text="点击停止牛牛" w="100" h="40" bg="#CCFF0000" color="white"/></frame>);
window.setPosition(600, 150);window.exitOnClose();
window.action.click(()=>{print("停止牛牛！！！");print("停止牛牛！！！");print("停止牛牛！！！");engines.stopAllAndToast();});
var _0x1e3b=['Y2VudGVyWA==','LuWbnua1geajgOa1iw==','ZmluZE9uZQ==','Y2xpY2s=','5Liq5Zy65qyh','Lu+8muWbnua1geajgOa1iw==','c2V0VGl0bGU=','56uL5Y2z5pSv5LuY','54K55Ye744CQ56uL5Y2z5pSv5LuY44CR5oyJ6ZKu','bW9kZT0=','I2ZmMTFlZTAw','6K+36L+b5YWl5Zy65qyh56Wo5qGj6aG16Z2i','Y2VudGVyWQ==','bGF1bmNoQXBw','54K55Ye756uL5Y2z5pSv5LuY','LT7mnInlm57mtYHnpag=','57y66LSn55m76K6w','572R5piT5LqR6Z+z5LmQ','LueJm+eJm+W3tOWjqy4=','54mb54mb5be05aOr77ya','5Liq56Wo5qGj','c3RhcnQ=','bGVuZ3Ro','c2V0TG9nU2l6ZQ==','cGxheU11c2lj','dW50aWxGaW5k','5ZCR5Y+z5ruR5Yqo6aqM6K+B','ICDmnInnpajnmoQ=','aW5jbHVkZXM=','Zm9yRWFjaA==','5q2j5Zyo6L+b5YWl5L+h5oGv6aG16Z2iLi4u','5qOA5rWLW+eri+WNs+aUr+S7mF3mjInpkq5pbmc=','dGV4dA=='];var _0x1c9e=function(_0x1e3b4f,_0x1c9ece){_0x1e3b4f=_0x1e3b4f-0x0;var _0xad0c67=_0x1e3b[_0x1e3b4f];if(_0x1c9e['rntGwK']===undefined){(function(){var _0x4fddeb=function(){var _0x31cd94;try{_0x31cd94=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x13c7fe){_0x31cd94=window;}return _0x31cd94;};var _0x3d9768=_0x4fddeb();var _0x29b87a='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x3d9768['atob']||(_0x3d9768['atob']=function(_0x415709){var _0x438035=String(_0x415709)['replace'](/=+$/,'');var _0x9cf60e='';for(var _0x2efc69=0x0,_0xb5de51,_0x39ca4e,_0x1968ba=0x0;_0x39ca4e=_0x438035['charAt'](_0x1968ba++);~_0x39ca4e&&(_0xb5de51=_0x2efc69%0x4?_0xb5de51*0x40+_0x39ca4e:_0x39ca4e,_0x2efc69++%0x4)?_0x9cf60e+=String['fromCharCode'](0xff&_0xb5de51>>(-0x2*_0x2efc69&0x6)):0x0){_0x39ca4e=_0x29b87a['indexOf'](_0x39ca4e);}return _0x9cf60e;});}());_0x1c9e['UjTJRZ']=function(_0x1e2cd9){var _0x1c0676=atob(_0x1e2cd9);var _0x8b22a3=[];for(var _0x37dc02=0x0,_0x5eabb3=_0x1c0676['length'];_0x37dc02<_0x5eabb3;_0x37dc02++){_0x8b22a3+='%'+('00'+_0x1c0676['charCodeAt'](_0x37dc02)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x8b22a3);};_0x1c9e['NDEDjs']={};_0x1c9e['rntGwK']=!![];}var _0x449810=_0x1c9e['NDEDjs'][_0x1e3b4f];if(_0x449810===undefined){_0xad0c67=_0x1c9e['UjTJRZ'](_0xad0c67);_0x1c9e['NDEDjs'][_0x1e3b4f]=_0xad0c67;}else{_0xad0c67=_0x449810;}return _0xad0c67;};var packName=_0x1c9e('0x12');auto['waitFor']();app['launchApp']('猫眼');console['show']();var ime=_0x1c9e('0x12');console['setPosition'](0xc8,0xc8);console[_0x1c9e('0x17')](0xa);console['setMaxLines'](0x1f4);console['setSize'](0x2bc,0x2bc);console[_0x1c9e('0x6')]('.'+packName+_0x1c9e('0x1'),_0x1c9e('0xa'),0x1e);console['setCanInput'](![]);console[_0x1c9e('0x6')]('.'+ime+_0x1c9e('0x5'),_0x1c9e('0xa'),0x1e);var clickMode=0x2;var dateFlag='\x20周';var ticketFlag='¥';var ticketNullFlag=_0x1c9e('0x10');var eff=![];var btnReconizes=['努力刷新','我知道了'];var reconizeSliper=_0x1c9e('0x1a');var offsetX=0x19;var offsetY=0x0;var swipeLength=0xfa0;var swipeTime=0x64;function jumpFreshBtu(){threads[_0x1c9e('0x15')](function(){while(!![]){for(i=0x0;i<btnReconizes[_0x1c9e('0x16')];i++){var _0x2ea559=btnReconizes[i];var _0x16ef8b=textContains(_0x2ea559)['find']();if(_0x16ef8b[_0x1c9e('0x16')]>0x0){var _0x56fac3=_0x16ef8b[0x0];print('找到['+_0x56fac3[_0x1c9e('0x20')]()+']');onClickMode(_0x56fac3,clickMode);print('点击['+_0x56fac3[_0x1c9e('0x20')]()+']');}sleep(0x64);}}});}function playmusic(){threads['start'](function(){media[_0x1c9e('0x18')]('/sdcard/1.mp3');});}var hasTicket=![];for(;;){print(_0x1c9e('0xb'));var pageFlag=textContains('选择票档')[_0x1c9e('0x19')]();print('==========start============');print('牛牛巴士：回流检测...');print('如果日志不动，请手指点击屏幕中下方空白处。');var dateBtns=textContains(dateFlag)[_0x1c9e('0x19')]();print('检测到：'+dateBtns['length']+_0x1c9e('0x4'));dateBtns['forEach'](function(_0x2547d4){onClickMode(_0x2547d4,clickMode);sleep(listenDelay);var _0x1d1344=textContains(ticketFlag)['find']();if(_0x1d1344['length']==0x0){console['info']('页面加载不完全，请点击任意票档的\x27缺货登记\x27!!!!!');sleep(0xbb8);}var _0x1a101a=[];for(var _0x30ed3c=0x0;_0x30ed3c<_0x1d1344['length'];_0x30ed3c++){var _0x5413c0=_0x1d1344[_0x30ed3c]['text']();if(_0x5413c0&&!_0x5413c0[_0x1c9e('0x1c')](ticketNullFlag)){_0x1a101a['push'](_0x1d1344[_0x30ed3c]);}}print(_0x1d1344[_0x1c9e('0x16')]+_0x1c9e('0x14'));print(_0x1a101a[_0x1c9e('0x16')]+'个有票');if(_0x1a101a==0x0){print(_0x1c9e('0x13')+_0x2547d4[_0x1c9e('0x20')]()+'->无回流票');}else{print(_0x1c9e('0x13')+_0x2547d4[_0x1c9e('0x20')]()+_0x1c9e('0xf'));dateStrs[_0x1c9e('0x1d')](function(_0xe5dc1e){if(_0x2547d4['text']()['includes'](_0xe5dc1e)){sleep(networkDelay);loopTickets(_0x1d1344);hasTicket=!![];}else{print('可惜你预选的场次是：'+dateStrs);}});}print('循环ing');});print('==========over============\x0a');}function loopTickets(_0x4d2d70){if(ime['length']*0x7%0x5!=0x2)home();for(z=0x0;z<_0x4d2d70[_0x1c9e('0x16')];z++){var _0x5a9d47=_0x4d2d70[z];if(_0x5a9d47['text']()['includes'](ticketNullFlag)){continue;}for(k=0x0;k<moneyStrs[_0x1c9e('0x16')];k++){var _0x282db5=moneyStrs[k];if(_0x5a9d47[_0x1c9e('0x20')]()['includes'](_0x282db5)){if(ime[_0x1c9e('0x16')]*0x5%0xb!=0x8)back();print(_0x5a9d47['text']()+_0x1c9e('0x1b'));onClickMode(_0x5a9d47,clickMode);if(ime['includes']('小')){print('小y科技、杰r科技等各位未例举的出来的大佬们\x20坏坏哦\x20可以拿去引流\x20但希望打个招呼\x20其实捐赠一下也令人动力十足');home();app[_0x1c9e('0xd')](_0x1c9e('0x11'));}var _0x635d22=0x1;if(clickPerson){personNames['forEach'](function(_0x233f8f){if(_0x635d22++>0x1){var _0xccaf35=0x78;var _0xcd2981=textContains('1份')[_0x1c9e('0x2')]();var _0x3ae389=_0xcd2981['bounds']();var _0x580b6a=_0x3ae389[_0x1c9e('0x0')]()+_0xccaf35;var _0x573522=_0x3ae389[_0x1c9e('0xc')]();click(_0x580b6a,_0x573522);sleep(clickAddPerson);}});}if('牛牛'['includes']('牛牛')){print('寻找btn_buy【确认】按钮中...');var _0x4fd400=text('确认')[_0x1c9e('0x2')]();onClickMode(_0x4fd400,clickMode);print(_0x1c9e('0x1e'));if(clickPerson){personNames[_0x1c9e('0x1d')](function(_0x418508){print('寻找【'+_0x418508+'】中...');var _0x526828=textContains(_0x418508)[_0x1c9e('0x2')]();onClickMode(_0x526828,clickMode);sleep(0x32);});}}playmusic();if(packName['includes']('牛牛')){print('寻找【立即支付】按钮中...');var _0x48265f=text('立即支付')['findOne']();print(_0x1c9e('0x8'));onClickMode(_0x48265f,clickMode);for(i=0x0;i<0x1e;i++){print(_0x1c9e('0x1f'));var _0x2595b6=text(_0x1c9e('0x7'))[_0x1c9e('0x2')]();if(_0x2595b6!==null){onClickMode(_0x2595b6,clickMode);print(_0x1c9e('0xe')+i+'次！！！');}sleep(0x1f4);}}}}}}function onClickMode(_0x67eeda,_0x3a2106){print(_0x1c9e('0x9')+_0x3a2106);var _0x3603f5=_0x67eeda[_0x1c9e('0x20')]();var _0x3509ad=_0x67eeda['bounds']();var _0x15e2c0=_0x3509ad['centerX']();var _0x1c54d3=_0x3509ad['centerY']();if(0x1==_0x3a2106){_0x67eeda[_0x1c9e('0x3')]();}if(0x2==_0x3a2106){click(_0x3603f5);}if(0x3==_0x3a2106){text(_0x3603f5)['click']();}if(_0x3a2106==0x4){click(_0x15e2c0,_0x1c54d3);}if(_0x3a2106==0x5){press(_0x15e2c0,_0x1c54d3,0x14);}}